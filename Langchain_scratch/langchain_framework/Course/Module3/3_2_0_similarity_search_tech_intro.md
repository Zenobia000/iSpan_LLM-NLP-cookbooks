# Similarity Search 檢索方式詳解

在相似度檢索（Similarity Search）中，選擇適合的**檢索方式**對於提升查詢效率、準確性以及擴展性至關重要。本節將介紹各種檢索方式的原理、優缺點及應用場景。

---

## **1. FAISS（Facebook AI Similarity Search）**
### **📌 方式概述**
FAISS 是 Facebook AI 開發的開源向量檢索庫，主要用於高效的**近似最近鄰（Approximate Nearest Neighbors, ANN）** 檢索，適合處理大規模數據。

### **⚙️ 主要特性**
- **支援 GPU 加速**，可顯著提升檢索速度。
- **多種索引策略（Indexing Strategies）**，如 IVF（Inverted File Index）、HNSW、PQ（Product Quantization）等。
- **適合大規模數據檢索**，但索引更新速度較慢。

### **👍 優勢**
✅ **低延遲**，查詢速度極快，適合實時應用。  
✅ **擴展性高**，可處理數億級別的向量數據。  
✅ **支持 CPU / GPU**，可根據需求進行加速。

### **👎 限制**
❌ **索引更新效率較低**，插入新數據需重新構建索引。  
❌ **查詢準確性取決於索引策略**，需要權衡速度與精度。

### **📌 適用場景**
✅ **推薦系統（RS）**  
✅ **大規模圖像檢索**  
✅ **文本相似性搜尋（Semantic Search）**

---

## **2. Annoy（Approximate Nearest Neighbors Oh Yeah）**
### **📌 方式概述**
Annoy 是由 Spotify 開發的輕量級 ANN 庫，適合嵌入式應用與低內存場景，使用**隨機樹（Random Projection Trees）**來進行檢索。

### **⚙️ 主要特性**
- **使用 KD-Tree / 隨機投影樹（Random Projection Trees）進行索引**。
- **索引是只讀的（Read-Only）**，適合靜態數據集。
- **內存佔用較小**，適合邊緣計算場景。

### **👍 優勢**
✅ **低內存需求**，適合小規模應用。  
✅ **索引建置快**，適合變動不大的數據集。  
✅ **簡單易用**，無需額外依賴項。

### **👎 限制**
❌ **不支援 GPU 加速**，計算資源需求較高。  
❌ **查詢準確性低於 FAISS / ScaNN**，適用於對精度要求不高的場景。  
❌ **索引更新效率低**，無法動態插入新數據。

### **📌 適用場景**
✅ **音樂推薦（Spotify）**  
✅ **低計算資源設備（如 IoT）**  
✅ **中等規模的相似性檢索應用**

---

## **3. ScaNN（Scalable Nearest Neighbors）**
### **📌 方式概述**
ScaNN 是 Google 針對 ANN 優化的高效檢索庫，針對大規模數據提供更快的索引與檢索能力，適合高吞吐量應用。

### **⚙️ 主要特性**
- **使用 LSH（局部敏感哈希）+ PQ（Product Quantization）技術**來加速檢索。  
- **支援內存優化**，減少索引佔用。  
- **適用於 Google 內部搜索和推薦系統**。

### **👍 優勢**
✅ **比 FAISS 更快的檢索速度**。  
✅ **適合低延遲應用**（如即時推薦）。  
✅ **記憶體使用率低**，可高效擴展。  

### **👎 限制**
❌ **索引建置時間較長**。  
❌ **需要更多的調參來達到最佳效果**。  

### **📌 適用場景**
✅ **搜尋引擎（Google Search）**  
✅ **推薦系統（Google Play、YouTube）**  
✅ **低延遲檢索應用**

---

## **4. HNSW（Hierarchical Navigable Small World）**
### **📌 方式概述**
HNSW 是一種基於**圖（Graph-Based Indexing）**的 ANN 方法，使用多層小世界網絡來加速檢索。

### **⚙️ 主要特性**
- **使用有向圖（Navigable Small World Graphs）建構索引**，查詢時通過圖結構快速導航到最近鄰。  
- **在高維空間下比 KD-Tree 表現更佳**。  

### **👍 優勢**
✅ **檢索準確度高，優於 FAISS**。  
✅ **擴展性強，可處理數十億級別的數據**。  
✅ **查詢效率比傳統 KD-Tree 方法快**。  

### **👎 限制**
❌ **索引建置時間長，內存需求高**。  
❌ **不支援 GPU 加速**，對於超大規模數據檢索仍有瓶頸。  

### **📌 適用場景**
✅ **基因數據檢索**  
✅ **知識圖譜構建**  
✅ **高精度相似性搜尋**

---

## **5. DPR（Dense Passage Retriever）**
### **📌 方式概述**
DPR 是基於深度學習的檢索方式，利用 BERT 進行語義向量檢索，適合文本檢索應用。

### **⚙️ 主要特性**
- **使用 BERT 訓練的語義嵌入（Dense Embeddings）**。  
- **支援端到端的語義檢索流程**。  

### **👍 優勢**
✅ **語義匹配能力強，優於傳統向量檢索**。  
✅ **適用於文本檢索與 QA 系統**。  

### **👎 限制**
❌ **計算成本高，需要強大計算資源**。  
❌ **擴展性較低，難以應對超大規模數據集**。  

### **📌 適用場景**
✅ **知識檢索（Knowledge Retrieval）**  
✅ **問答系統（QA Systems）**

---

## **6. Hybrid Search（BM25 + Vectors）**
### **📌 方式概述**
Hybrid Search 結合**關鍵字匹配（BM25）**與**語義匹配（向量檢索）**，提供更準確的檢索結果。

### **⚙️ 主要特性**
- **結合關鍵字索引與語義向量索引**，提升查詢結果的相關性。  
- **適合需要多維檢索的場景（如搜索引擎、知識圖譜）**。  

### **👍 優勢**
✅ **關鍵字與語義檢索雙重優勢**。  
✅ **適合多類型檢索需求（如混合查詢）**。  

### **👎 限制**
❌ **計算成本較高**，需要同時維護兩種索引。  

### **📌 適用場景**
✅ **企業內部搜索**  
✅ **法律、醫學等專業文本檢索**  

---

## **結論**
不同的檢索方式適用於不同的應用場景，從**低延遲檢索**（FAISS, ScaNN）到**語義檢索**（DPR, ColBERT），選擇合適的方法能夠顯著提升檢索效率與準確性。
